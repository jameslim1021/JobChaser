{"version":3,"sources":["login.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,SAAS,QAAQ,MAAR,EAAb;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,YAAR,CAAX;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;;AAEA,OAAO,GAAP,CAAW,GAAX,EAAgB,UAAS,GAAT,EAAc,GAAd,EAAkB;AAChC,MAAI,IAAI,OAAJ,CAAY,EAAhB,EAAmB;AACjB,QAAI,QAAJ,CAAa,CAAC,MAAD,GAAS,IAAI,OAAJ,CAAY,EAArB,EAAA,AAAwB,CAArC;AACD,GAFD,MAEO;AACL,QAAI,MAAJ,CAAW,OAAX;AACD;AACF,CAND;;AAQA,OAAO,IAAP,CAAY,GAAZ,EAAiB,UAAS,GAAT,EAAc,GAAd,EAAkB;AACjC,OAAK,OAAL,EAAc,KAAd,CAAoB,OAApB,EAA6B,IAAI,IAAJ,CAAS,KAAtC,EAA6C,IAA7C,CAAkD,UAAS,IAAT,EAAc;AAC9D,QAAG,IAAH,EAAS;AACP,UAAG,OAAO,WAAP,CAAmB,IAAI,IAAJ,CAAS,QAA5B,EAAsC,KAAK,CAAL,EAAQ,QAA9C,CAAH,EAA2D;AACzD,YAAI,OAAJ,CAAY,EAAZ,GAAiB,KAAK,CAAL,EAAQ,EAAzB;AACA,YAAI,QAAJ,CAAa,CAAC,MAAD,GAAS,KAAK,CAAL,EAAQ,EAAjB,EAAA,AAAoB,CAAjC;AACD,OAHD,MAGO;AACL,YAAI,MAAJ,CAAW,OAAX,EAAoB,EAAC,OAAO,+BAAR,EAApB;AACD;AACF,KAPD,MAOO;AACH,UAAI,MAAJ,CAAW,OAAX,EAAoB,EAAC,OAAO,+BAAR,EAApB;AACH;AACD,QAAI,QAAJ,CAAa,CAAC,MAAD,GAAS,KAAK,CAAL,EAAQ,EAAjB,EAAA,AAAoB,CAAjC;AACD,GAZD;AAaD,CAdD;;AAgBA,OAAO,OAAP,GAAiB,MAAjB","file":"login-compiled.js","sourcesContent":["\"use strict\";\nvar express = require(\"express\");\nvar router = express.Router();\nvar pg = require(\"pg\");\nvar knex = require(\"../db/knex\");\nvar bcrypt = require(\"bcrypt\");\n\nrouter.get('/', function(req, res){\n  if (req.session.id){\n    res.redirect(`/user/${req.session.id}`);\n  } else {\n    res.render('login');\n  }\n});\n\nrouter.post('/', function(req, res){\n  knex('users').where('email', req.body.email).then(function(user){\n    if(user) {\n      if(bcrypt.compareSync(req.body.password, user[0].password)){\n        req.session.id = user[0].id;\n        res.redirect(`/user/${user[0].id}`);\n      } else {\n        res.render('login', {error: 'Email / Password do not match'});\n      }\n    } else {\n        res.render('login', {error: 'Email / Password do not match'});\n    }\n    res.redirect(`/user/${user[0].id}`);\n  });\n});\n\nmodule.exports = router;\n"]}